# Main Takeaway



# intro

- 广义坐标

  广义坐标是用来描述系统位形所需要的独立参数，或者最少参数。当分析有的问题时（尤其是当有许多约束条件的时候），尽量选择独立的广义坐标。因为这样可以减少代表约束的变量。



# 参考系运动学

- 罗德里格旋转公式：[[数学\]罗德里格旋转公式（Rodrigues' rotation formula）](https://zhuanlan.zhihu.com/p/451579313)

  - 计算三维空间中，一个向量绕旋转轴旋转给定角度以后得到的新向量的计算公式

  - 核心想法：使用原向量，旋转轴及它们叉积作为标架表示出旋转以后的向量。可以改写为矩阵形式

    > 注意一下向量三重积的展开的使用

- 欧拉参数：

  - 可以将罗德里格旋转公式矩阵形式A用**四个欧拉参数**来表示，其与被旋转的矢量没有关系，因此常将A作为转换矩阵

- 广义位移

  - $r^i=R^i+A^i\bar{u}^i$

    

# 分析技术

## 变分法

- 变分[一针见血搞定变分学---（5）变分符号定义及运算规则 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/670588095)
  - 解决问题: 寻找某些给定积分取极值的曲线



## some concepts

先讨论力学系统的一些重要概念

- 广义坐标

- 完整和非完整约束

- 自由度

- 广义坐标分块

  虚位移:

- 虚功

- 系统广义力

- 拉格朗日动力学



## 虚位移原理

虚位移原理也很有趣，假想结构发生了位移，然后根据做功来计算主动力问题。

- [第十四章 虚位移原理---理论力学（重点总结） - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/593223431)

- 虚位移

  - 是什么: 符合系统约束条件的**假想无穷小位移**，与时间无关（时间固定），不依赖实际运动过程。

    虚位移用$\delta r$表示，意义为在$\delta t = 0$时间发生的位移，因此有时候又称为等时变分

    > 仅需满足瞬时约束

  - 求虚位移: 

    - 几何法
    - 解析法(对约束方程进行变分运算)

- 虚位移原理(虚功原理):

  对于受**理想约束**的质点系，其平衡的充要条件是：
  $$
  \sum F_i \cdot \delta r_i = 0
  $$

  - $F_i$: 作用在第i个质点上的主动力
  - $\delta r_i$: 该质点的虚位移

  所有主动力的虚功之和为零时，系统无自发运动趋势。

  - **数学推导**

    **1. 约束条件**

    对于系统约束：

    $$
    f_j(\mathbf{r}_1, \mathbf{r}_2, \dots, \mathbf{r}_n; t) = 0 \quad (j = 1, 2, \dots, m)
    $$
    **2. 实位移（Actual Displacement）**

    - **时间相关**：与时间微分 $  dt  $ 同步发生。
    - **全微分条件**：

    $$
    \sum_{i=1}^n \nabla f_j \cdot d\mathbf{r}_i + \frac{\partial f_j}{\partial t} dt = 0 \quad (j = 1, 2, \dots, m)
    $$

    - **物理意义**：真实运动轨迹满足的微分约束。

    **3. 虚位移（Virtual Displacement）**

    - **时间无关**：假设时间冻结（$  dt = 0  $）。
    - **几何约束条件**：

    $$
      \sum_{i=1}^n \nabla f_j \cdot \delta\mathbf{r}_i = 0 \quad (j = 1, 2, \dots, m)
    $$

    - **物理意义**：假想的、瞬时允许的微小位移。

## 广义坐标

- 广义坐标: 用以确定质点系位置的独立参变量

  > 与自由度相对应的独立坐标就是广义坐标

- **广义力**是分析力学中与**广义坐标**对应的作用量

  对于系统受主动力 $  F_i  $ 作用，广义力 $  Q_j  $ 定义为：

  $$
  Q_j = \sum_{i} F_i \cdot \frac{\partial r_i}{\partial q_j}
  $$
  - **$  r_i  $**：第 $  i  $ 个质点的位置矢量。
  - **$  q_j  $**：第 $  j  $ 个广义坐标。
  - **$  F_i  $**：作用在第 $  i  $ 个质点上的主动力。
  - **数学意义**：广义力是主动力在广义坐标方向上的投影之和，反映了能量在系统自由度上的传递效率。

**广义坐标形式**

引入广义坐标 $ q_k $，虚位移表示为：

$$
\delta \mathbf{r}_i = \sum_{k} \frac{\partial \mathbf{r}_i}{\partial q_k} \delta q_k
$$

虚功原理转化为：

$$
\sum_{i} \mathbf{F}_i \cdot \delta \mathbf{r}_i = \sum_{i,k} \mathbf{F}_i \cdot \frac{\partial \mathbf{r}_i}{\partial q_k} \delta q_k = \sum_{k} Q_k \delta q_k = 0
$$

其中广义力 $ Q_k $ 定义为：

$$
Q_k = \sum_{i} \mathbf{F}_i \cdot \frac{\partial \mathbf{r}_i}{\partial q_k}
$$

因虚位移 $ \delta q_k $ 相互独立，平衡条件要求：

$$
Q_k = 0 \quad (\forall k)
$$

## 虚功

$$
\delta W = \sum F_i \cdot \delta r_i
$$

- 主动力
- 约束力



## 拉格朗日动力方程

- 推导:[【分析力学】Lagrange方程及其推导 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/124245453)



## 多变量欧拉方程

[【变分法学习笔记（一）】变分法中的欧拉方程的细致讲解&详细推导 - 间宫羽咲sama - 博客园 (cnblogs.com)](https://www.cnblogs.com/jiangongyuxiao/p/15088070.html#3多方程单变量欧拉方程)

- 多变量欧拉方程
  - 是什么: 多变量欧拉方程是**变分法**中用于求解多变量泛函极值问题的必要条件，属于一类偏微分方程组
  - 核心思想: 通过泛函对多个自变量的微小扰动，导出使泛函取极值的函数需满足的条件



# VMC

## 思想

VMC (virtual model control) 是一种直觉控制方式，其关键是在每个需要控制的自由度上构造恰当的虚拟构件以产生合适的虚拟力。虚拟力不是实际执行机构的作用力或力矩，而是通过执行机构的作用经过机构转换而成。为了将工作空间 (Task Space) 的力或力矩映射成关节空间 (Joint Space) 的关节力矩，需要这两个空间的位置映射关系，即正运动学模型
$$
x=f(q)
$$


# 







# References

- [五连杆运动学解算与VMC ](https://zhuanlan.zhihu.com/p/613007726)
- [机器人坐标系解读及四足机器人虚拟模型控制（VMC）控制方法](https://blog.csdn.net/weixin_45910070/article/details/130565690)